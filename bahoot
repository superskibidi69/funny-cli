#!/bin/bash
set -e

# 🎨 Terminal colors
RED='\033[0;31m'
GREEN='\033[0;32m'
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# 🌀 Animated loader
loader() {
  echo -n "Loading"
  for i in {1..5}; do
    echo -n "."
    sleep 0.2
  done
  echo ""
}

# 🔥 ASCII rocket launch
rocket() {
  frames=(
"🚀"
"🚀💨"
"🚀     💨"
"🚀         💨"
"🚀             💨"
"🚀                 💥"
  )
  for frame in "${frames[@]}"; do
    clear
    echo -e "${YELLOW}$frame${NC}"
    sleep 0.2
  done
}

# 🧠 Diagnostic scanner
doctor() {
  echo -e "${GREEN}🔍 Running diagnostics...${NC}"
  sleep 0.5
  echo "✅ Bash version: $(bash --version | head -n 1)"
  echo "✅ Terminal: $TERM"
  echo "✅ User: $USER"
  echo "✅ Host: $(hostname)"
  echo "✅ Uptime: $(uptime -p)"
}

# 💥 Fake meltdown
prank() {
  loader
  echo -e "${RED}💥 SYSTEM FAILURE DETECTED${NC}"
  sleep 0.5
  echo "Kernel panic: unexpected token 'bahoot'"
  sleep 0.5
  echo "Dumping memory..."
  sleep 0.5
  echo "Just kidding 😎"
}

# 🧨 Chaos mode: scrolling ASCII
chaos() {
  echo -e "${CYAN}🧨 Entering chaos mode...${NC}"
  sleep 0.5
  for i in {1..20}; do
    echo -e "${RED}ERROR $i: sanity not found${NC}"
    sleep 0.1
  done
  echo -e "${CYAN}💫 Chaos complete.${NC}"
}

# 🚀 Deploy animation
deploy() {
  loader
  rocket
  echo -e "${GREEN}🚀 Bahoot deployed successfully!${NC}"
}

# 🧼 Help menu
help_menu() {
  echo -e "${CYAN}Bahoot CLI 🤖 — Available commands:${NC}"
  echo "  prank     - Trigger a fake meltdown"
  echo "  deploy    - Launch ASCII rocket"
  echo "  chaos     - Enter chaos mode"
  echo "  doctor    - Run environment diagnostics"
  echo "  help      - Show this menu"
}

# 🎭 Subcommand handler
case "$1" in
  prank) prank ;;
  deploy) deploy ;;
  chaos) chaos ;;
  doctor) doctor ;;
  help|*) help_menu ;;
esac
